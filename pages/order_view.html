<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Advanced Transports | Dashboard</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
   <!-- DataTables -->
  <link rel="stylesheet" href="../plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="../plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
  <link rel="stylesheet" href="../plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Select2 -->
  <link rel="stylesheet" href="../plugins/select2/css/select2.min.css">
  <link rel="stylesheet" href="../plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">
   <!-- Daterange picker -->
  <link rel="stylesheet" href="../plugins/daterangepicker/daterangepicker.css">
  <!-- Tempusdominus Bootstrap 4 -->
  <link rel="stylesheet" href="../plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
  <!-- iCheck -->
  <link rel="stylesheet" href="../plugins/icheck-bootstrap/icheck-bootstrap.min.css">
  <!-- JQVMap -->
  <link rel="stylesheet" href="../plugins/jqvmap/jqvmap.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="../plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
 
  </head>
<body class="hold-transition sidebar-mini layout-fixed">
<div class="wrapper">

  <!-- Preloader -->
  <div class="preloader flex-column justify-content-center align-items-center bg-dark">
    <img class="animation__shake" src="../pages/images/logo-webw.png" alt="AdminLTELogo" height="100" width="180">
  </div>

  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">
      <!-- Notifications Dropdown Menu -->
      <li class="nav-item dropdown">
        <a class="nav-link" data-toggle="dropdown" href="#">
          <i class="far fa-bell"></i>
          <span class="badge badge-warning navbar-badge">3</span>
        </a>
        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
          <span class="dropdown-item dropdown-header">3 Notifications</span>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <i class="fas fa-envelope mr-2"></i> 1 new messages
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <i class="fas fa-envelope mr-2"></i> 1 new messages
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <i class="fas fa-envelope mr-2"></i> 1 new messages
          </a>
          <div class="dropdown-divider"></div>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
          <i class="fas fa-expand-arrows-alt"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link"  href="#">
            User Name
         </a>
      </li>
    </ul>
  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a href="index3.html" class="brand-link">
      <!--<img src="dist/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">AdminLTE 3</span>-->
      <span class="brand-text font-weight-light">Advanced Transports</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" id="left-nav-bar" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
          
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0">Global Search</h1>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <!-- MAIN ROW -->
        <div class="row">
          <!-- START COL -->
         <div class="col">
           <div class="card">
              <div class="card-header">
                <h3 class="card-title">ORDER #<span id="order_view_idOrder" style="color: blue;"><b>###</b></span></h3>
              </div>
              <!-- /.card-header -->
              <div class="card-body">
                <div class="row">
                  <div class="col-sm">
                    <label>Order Status</label>
                  </div>
                  <div class="form-group">
                    <select class="form-control select2" id="order_status">
                        <option value="Awaiting customer Signature">Awaiting customer Signature</option>
                        <option value="Dispatch">Dispatch</option>
                        <option value="Pick Up">Pick Up</option>
                        <option value="Deliver">Deliver</option>
                        <option value="Completed">Completed</option>

                      </select>
                  </div>  
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Secundary Status</label>
                  </div>
                  <div class="col-sm">
                    <div class="form-group">
                      <select class="form-control select2" id="secundary_status">
                        <option>...</option>
                      </select>
                    </div> 
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Order Created</label>
                  </div>
                  <div class="form-group">
                    <input type="text" id="order-created" class="form-control" disabled="" >
                  </div>  
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Transport Type</label>
                  </div>
                  <div class="col-sm">
                    <div class="form-group">
                      <select class="form-control select2" id="transport-type">
                     
                      </select>
                    </div> 
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>First Available Pickup Date:</label>
                  </div>
                  <div class="col-sm">
                    <div class="form-group">
                      <div class="input-group date" id="first_available_pickup_date" data-target-input="nearest">
                        <input type="text" class="form-control datetimepicker-input" data-target="#first_available_pickup_date" value="08/02/2021" />
                        <div class="input-group-append" data-target="#first_available_pickup_date" data-toggle="datetimepicker">
                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Referral Source</label>
                  </div>
                  <div class="col-sm">
                    <div class="form-group">
                      <select class="form-control select2" id="referral-source">
                        <option>Loading referral source...</option>
                      </select>
                    </div> 
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Assigned User</label>
                  </div>
                  <div class="col-sm">
                    <div class="form-group">
                      <select class="form-control select2" id="select_assigned_user">
                        <option>Loading users...</option>
                      </select>
                    </div> 
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Assigned Team</label>
                  </div>
                  <div class="col-sm">
                    <div class="form-group">
                      <select class="form-control select2" id="select_assigned_team">
                        <option>Loading Teams...</option>
                      </select>
                    </div> 
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Order Signed On</label>
                  </div>
                  <div class="form-group">
                    <input type="text" id="order_status" class="form-control" disabled="" value="Customer has not signed the eDoc contract.">
                  </div>  
                </div>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->
         </div>
         <!-- /. col -->
          <!-- START COL -->
         <div class="col mr-2">
          <div class="row">
           <div class="card col">
              <div class="card-header">
                <h3 class="card-title">PRICE AND TERMS</h3>
              </div>
              <!-- /.card-header -->
              <div class="card-body">
                <div class="row">
                  <div class="col-sm">
                    <label>Total Tariff</label>
                  </div>
                  <div class="form-group">
                    <input type="text" id="total_tariff" placeholder ="$0.00" class="form-control">
                  </div>  
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Carrier Pay</label>
                  </div>
                  <div class="form-group">
                    <input type="text" id="carrier_pay" placeholder ="$0.00" class="form-control">
                  </div>  
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Carrier Pay Terms</label>
                  </div>
                  <div class="col-sm">
                    <div class="form-group">
                      <select class="form-control select2" id="select_carrier_pay">
                        <option>COD - Cash</option>
                        <option>COD - Check</option>
                        <option>COP - Cash</option>
                        <option>COP - Check</option>
                        <option>Complex Terms</option>
                      </select>
                    </div> 
                  </div>
                </div>
                 <div class="row">
                  <div class="col-sm">
                    <label>Broker Fee</label>
                  </div>
                  <div class="form-group">
                    <input type="text" id="broker_pay" placeholder ="$0.00" class="form-control">
                  </div>  
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Broker Fee Terms</label>
                  </div>
                  <div class="col-sm">
                    <div class="form-group">
                      <select class="form-control select2" id="broker_fee_terms">
                        <option>Charge on Order</option>
                        <option>Charge on Dispatch</option>
                        <option>Charge on Pickup</option>
                        <option>Charge on Delivery</option>
                        <option>Shipper Invoice</option>
                      </select>
                    </div> 
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Wrecker Fee</label>
                  </div>
                  <div class="form-group">
                    <input type="text" id="wrecker_pay" placeholder="$0.00" class="form-control">
                  </div>  
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Other Fee</label>
                  </div>
                  <div class="form-group">
                    <input type="text" id="other_pay" placeholder ="$0.00" class="form-control">
                  </div>  
                </div>
                <div class="row">
                  <div class="col-sm">
                    <label>Special Terms</label>
                  </div>
                  <div class="form-group">
                    <input type="text" id="special_terms" class="form-control">
                  </div>  
                </div>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->
          </div>
         </div>
         <!-- /. col -->
          <!-- START COL -->
         <div class="col ">
          <div class="row">
           <div class="card col">
              <div class="card-header">
                <h3 class="card-title">CUSTOMER</h3>
              </div>
              <!-- /.card-header -->
              <div class="card-body">
                <div class="row">
                    <div class="col-sm">
                        <label>Name</label>
                    </div>
                    <div class="form-group">
                        <input type="text" id="customer_name" class="form-control" disabled>
                    </div>  
                </div>
                <div class="row">
                    <div class="col-sm">
                        <label>Phone</label>
                    </div>
                    <div class="form-group">
                        <input type="text" id="customer_phone" class="form-control" disabled>
                    </div>  
                </div>
                <div class="row">
                    <div class="col-sm">
                        <label>Email</label>
                    </div>
                    <div class="form-group">
                        <input type="text" id="customer_email" class="form-control" disabled>
                    </div>  
                </div>
                <!--<div class="row">
                    <div class="col-sm">
                        <label>Saved CC</label>
                    </div>
                    <div class="form-group">
                        <input type="text" id="saved_cc" class="form-control" disabled>
                    </div>  
                </div>-->
            </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->
          </div>
          <!-- card-ROUTE -->
          <!-- ROUTE CARD -->
          <div class="row">
              <div class="card col">
                  <div class="card-header">
                      <h3 class="card-title">ROUTE</h3>
                  </div>
                  <div class="card-body">
                      <!-- Origin Row -->
                      <div class="row">
                          <div class="col-sm-12">
                              <label>Origin</label>
                              <div class="form-group bg-light p-2 rounded">
                                  <p class="mb-1"><strong>Contact:</strong> <span id="origin-contact"></span></p>
                                  <p class="mb-1"><strong>Address:</strong> <span id="origin-address"></span></p>
                              </div>
                          </div>
                      </div>
                      <!-- Destination Row -->
                      <div class="row mt-3">
                          <div class="col-sm-12">
                              <label>Destination</label>
                              <div class="form-group bg-light p-2 rounded">
                                  <p class="mb-1"><strong>Contact:</strong> <span id="destination-contact"></span></p>
                                  <p class="mb-1"><strong>Address:</strong> <span id="destination-address"></span></p>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <!-- ./ card-ROUTE -->
          <!-- button ROW -->
            <div class="row mb-3">
              <div class="col">
                <button type="button" class="btn btn-outline-dark" id="btn-save-order">Save Order</button>
              </div>
            </div>
          <!-- /. button ROW-->
          </div>

         </div>
         <!-- /. col -->
        </div>
        <!-- /.MAIN ROW -->
        <!-- TABS ROW -->
        <div class="row">
          <div class="col-sm">
          <div class="card card-primary card-tabs">
              <div class="card-header p-0 pt-1">
                <ul class="nav nav-tabs navbar-dark" id="custom-tabs-two-tab" role="tablist">
                  <li class="nav-item">
                    <a class="nav-link active" id="custom-vehicles-tab" data-toggle="pill" href="#vehicles-tab" role="tab" aria-controls="custom-vehicles-tab" aria-selected="true">Vehicles</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="custom-internal-notes-tab" data-toggle="pill" href="#internal-notes-tab" role="tab" aria-controls="custom-internal-notes-tab" aria-selected="false">Internal Notes</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="custom-sales-history-tab" data-toggle="pill" href="#sales-history-tab" role="tab" aria-controls="custom-sales-history-tab" aria-selected="false">Sales history</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="custom-tabs-two-settings-tab" data-toggle="pill" href="#custom-tabs-two-settings" role="tab" aria-controls="custom-tabs-two-settings" aria-selected="false">Change History</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="tab_interested_carriers" data-toggle="pill" href="#interested-carriers-tab" role="tab" aria-controls="custom-tabs-two-settings" aria-selected="false">Interested Carriers</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="tab_payment_history" data-toggle="pill" href="#payments-history-tab" role="tab" aria-controls="custom-tabs-two-settings" aria-selected="false">Payment History</a>

                  </li>
                </ul>
              </div>
              <div class="card-body">
                <div class="tab-content" id="custom-tabs-two-tabContent">
                  <!-- TABLA DE VEHICULOS EN LA ORDEN -->
                  <div class="tab-pane fade show active" id="vehicles-tab" role="tabpanel" aria-labelledby="vehicles-tab">
                    <div class="row">
                        <div class="col-sm-1">
                            <button class="btn btn-dark" id="vehicles-btn-new">+ NEW</button>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body table-responsive">
                                    <table id="vehicles-table" class="table table-bordered table-striped">
                                        <thead>
                                            <tr>
                                                <th>Year</th>
                                                <th>Make</th>
                                                <th>Model</th>
                                                <th>Type</th>
                                                <th>Weight</th>
                                                <th>Dimensions (LxWxH)</th>
                                                <th>VIN</th>
                                                <th>Plate No.</th>
                                                <th>Lot No.</th>
                                                <th>Color</th>
                                                <th>Inop</th>
                                                <th>Tariff</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /. TABLA DE PAGOS EN LA ORDEN -->
                  <div class="tab-pane fade" id="payments-history-tab" role="tabpanel" aria-labelledby="payments-history-tab">
                      <div class="row">
                          <div class="col-sm-1">
                              <button class="btn btn-dark" id="new-payment-btn">+ NEW</button>
                          </div>
                      </div>
                      <div class="row mt-3">
                          <div class="col-12">
                              <div class="card">
                                  <div class="card-body table-responsive">
                                      <table id="order-payments-table" class="table table-bordered table-striped">
                                          <thead>
                                              <tr>
                                                  <th>Date</th>
                                                  <th>Type</th>
                                                  <th>Direction</th>
                                                  <th>Amount</th>
                                                  <th>Identification</th>
                                                  <th>Note</th>
                                                  <th>Actions</th>
                                              </tr>
                                          </thead>
                                          <tbody></tbody>
                                      </table>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="tab-pane fade" id="internal-notes-tab" role="tabpanel" aria-labelledby="internal-notes-tab">
                    <div class="row">
                      <div class="col-sm-1">
                        <button class="btn btn-dark" id="internal-notes-btn">+ NEW</button>
                      </div>
                    </div>
                    <div class="row">
                      
                    </div>
                  </div>
                  <div class="tab-pane fade" id="sales-history-tab" role="tabpanel" aria-labelledby="sales-history-tab">
                     <div class="row">
                      <div class="col-sm-1">
                        <button class="btn btn-dark">+ NEW</button>
                      </div>
                      <div class="col-sm-1">
                        <button class="btn btn-dark">EDIT</button>
                      </div>
                    </div>
                    <div class="row">
                      
                    </div>
                  </div>
                  <div class="tab-pane fade" id="interested-carriers-tab" role="tabpanel" aria-labelledby="tab_interested_carriers">
                    <div class="row">
                        <div class="col-sm-1">
                            <button class="btn btn-dark" id="new-interested-carrier-btn">+ NEW</button>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body table-responsive">
                                    <table id="order-interested-carriers-table" class="table table-bordered table-striped">
                                        <thead>
                                            <tr>
                                                <th>Carrier</th>
                                                <th>Status</th>
                                                <th>Contact</th>
                                                <th>Phone</th>
                                                <th>Pickup Date</th>
                                                <th>Delivery Date</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                  <div class="tab-pane fade" id="custom-tabs-two-settings" role="tabpanel" aria-labelledby="custom-tabs-two-settings-tab">
                     <div class="row">
                      <div class="col-sm-1">
                        <button class="btn btn-dark">+ NEW</button>
                      </div>
                      <div class="col-sm-1">
                        <button class="btn btn-dark">EDIT</button>
                      </div>
                    </div>
                    <div class="row">
                      
                    </div>
                  </div>
                </div>
              </div>
              <!-- /.card -->
            </div>
          </div> <!-- NEW CLOSE COLUM -->
        </div>
        <!-- /.TABS ROW -->
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
    <!-- INTERNAL NOTES MODAL -->
      <div class="modal fade" id="internal-notes-modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Internal Note</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="internal-notes-form">
                        <div class="form-group">
                            <label for="note-title">Title</label>
                            <input type="text" class="form-control" id="note-title" required>
                        </div>
                        <div class="form-group">
                            <label for="note-body">Note</label>
                            <textarea class="form-control" id="note-body" rows="4" required></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="save-note-btn">Save Note</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /. INTERNAL NOTES MODAL-->
    <!-- VEHICLES MODAL -->
      <div class="modal fade" id="vehicles-modal">
          <div class="modal-dialog modal-lg">
              <div class="modal-content">
                  <div class="modal-header">
                      <h4 class="modal-title">Add Vehicle to Order</h4>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                      </button>
                  </div>
                  <div class="modal-body">
                      <form id="order-modal-vehicles-form">
                          <div class="form-group">
                              <label>Select Vehicle</label>
                              <select class="form-control select2" id="order-modal-select-vehicle">
                                  <option value="" disabled selected>Select a vehicle</option>
                              </select>
                          </div>
                          <div class="row">
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Model Year</label>
                                      <input type="text" class="form-control" id="order-modal-input-modelyear" readonly>
                                  </div>
                              </div>
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Make</label>
                                      <input type="text" class="form-control" id="order-modal-input-make" readonly>
                                  </div>
                              </div>
                          </div>
                          <div class="row">
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Model</label>
                                      <input type="text" class="form-control" id="order-modal-input-model" readonly>
                                  </div>
                              </div>
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Vehicle Type</label>
                                      <input type="text" class="form-control" id="order-modal-input-type" readonly>
                                  </div>
                              </div>
                          </div>
                          <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Weight</label>
                                    <input type="number" step="0.01" class="form-control" id="order-modal-input-weight">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Weight Measure</label>
                                    <select class="form-control" id="order-modal-input-weight-measure">
                                        <option value="lbs">lbs</option>
                                        <option value="kg">kg</option>
                                        <option value="tons">tons</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Length</label>
                                    <input type="text" class="form-control" id="order-modal-input-length">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Width</label>
                                    <input type="text" class="form-control" id="order-modal-input-width">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Height</label>
                                    <input type="text" class="form-control" id="order-modal-input-height">
                                </div>
                            </div>
                        </div>
                          <!-- Fees Section -->
                          <div class="row">
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Carrier Pay</label>
                                      <input type="text"  class="form-control fee-input" id="order-modal-input-carrier-pay">
                                  </div>
                              </div>
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Broker Fee</label>
                                      <input type="text"  class="form-control fee-input" id="order-modal-input-broker-fee">
                                  </div>
                              </div>
                          </div>
                          <div class="row">
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Wrecker Fee</label>
                                      <input type="text"  class="form-control fee-input" id="order-modal-input-wrecker-fee">
                                  </div>
                              </div>
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Other Fee</label>
                                      <input type="text" class="form-control fee-input" id="order-modal-input-other-fee">
                                  </div>
                              </div>
                          </div>
                          <div class="row">
                              <div class="col-md-12">
                                  <div class="form-group">
                                      <label>Vehicle Tariff (Total)</label>
                                      <input type="text" class="form-control" id="order-modal-input-tariff" readonly>
                                  </div>
                              </div>
                          </div>
                          <!-- Vehicle Details -->
                          <div class="row">
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>VIN</label>
                                      <input type="text" class="form-control" id="order-modal-input-vin">
                                  </div>
                              </div>
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Plate No.</label>
                                      <input type="text" class="form-control" id="order-modal-input-plateno">
                                  </div>
                              </div>
                          </div>
                          <div class="row">
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Lot No.</label>
                                      <input type="text" class="form-control" id="order-modal-input-lotno">
                                  </div>
                              </div>
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Color</label>
                                      <input type="text" class="form-control" id="order-modal-input-color">
                                  </div>
                              </div>
                          </div>
                          <div class="row">
                              <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Inop</label>
                                      <div class="custom-control custom-switch custom-switch-on-success">
                                          <input type="checkbox" class="custom-control-input" id="order-modal-input-inop">
                                          <label class="custom-control-label" for="order-modal-input-inop"></label>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </form>
                  </div>
                  <div class="modal-footer justify-content-between">
                      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-primary" id="order-modal-save-vehicle-btn">Save Vehicle</button>
                  </div>
              </div>
          </div>
      </div>
    <!-- /. VEHICLES MODAL-->
    <!-- PAYMENTS MODAL -->
      <div class="modal fade" id="payment-modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">New Payment</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="payment-form">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Payment Date</label>
                                    <div class="input-group date" id="payment-date" data-target-input="nearest">
                                        <input type="text" class="form-control datetimepicker-input" id="payment-date-input" data-target="#payment-date"/>
                                        <div class="input-group-append" data-target="#payment-date" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Payment Type</label>
                                    <select id="payment-type" class="form-control select2">
                                        <option value="" disabled selected>Select payment type</option>
                                        <option value="Credit Card">Credit Card</option>
                                        <option value="Check">Check</option>
                                        <option value="Cash">Cash</option>
                                        <option value="Wire">Wire</option>
                                        <option value="EFT">EFT</option>
                                        <option value="Venmo">Venmo</option>
                                        <option value="PayPal">PayPal</option>
                                        <option value="Zelle">Zelle</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Direction</label>
                                    <select id="payment-direction" class="form-control select2">
                                        <option value="" disabled selected>Select direction</option>
                                        <option value="From Customer">From Customer</option>
                                        <option value="To Carrier">To Carrier</option>
                                        <option value="To Terminal">To Terminal</option>
                                        <option value="From Carrier">From Carrier</option>
                                        <option value="To Customer">To Customer</option>
                                        <option value="Carrier Refund To Customer">Carrier Refund To Customer</option>
                                        <option value="From Factoring Company">From Factoring Company</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Amount</label>
                                    <input type="text" id="payment-amount" class="form-control" placeholder="Enter amount">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Identification</label>
                                    <input type="text" id="payment-identification" class="form-control" placeholder="Enter identification">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Note</label>
                                    <textarea id="payment-note" class="form-control" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="save-payment-btn">Save Payment</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /. PAYMENTS MODAL -->
    <!-- INTERESTED CARRIERS MODAL -->
      <div class="modal fade" id="interested-carrier-modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">New Interested Carrier</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="interested-carrier-form">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Carrier</label>
                                    <select class="form-control select2" id="ic-carrier-select"></select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Status</label>
                                    <select class="form-control" id="ic-status">
                                        <option value="active">Active</option>
                                        <option value="inactive">Inactive</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Carrier Pay</label>
                                    <input type="text" class="form-control" id="ic-carrier-pay">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Pickup Date</label>
                                    <div class="input-group date" id="ic-pickup-date" data-target-input="nearest">
                                        <input type="text" class="form-control datetimepicker-input" id="ic-pickup-date-input"/>
                                        <div class="input-group-append" data-target="#ic-pickup-date" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Pickup Window</label>
                                    <select class="form-control" id="ic-pickup-window">
                                        <option value="estimated">Estimated</option>
                                        <option value="exactly">Exactly</option>
                                        <option value="no_later">No Later Than</option>
                                        <option value="no_earlier">No Earlier Than</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Delivery Date</label>
                                    <div class="input-group date" id="ic-delivery-date" data-target-input="nearest">
                                        <input type="text" class="form-control datetimepicker-input" id="ic-delivery-date-input"/>
                                        <div class="input-group-append" data-target="#ic-delivery-date" data-toggle="datetimepicker">
                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Delivery Window</label>
                                    <select class="form-control" id="ic-delivery-window">
                                        <option value="estimated">Estimated</option>
                                        <option value="exactly">Exactly</option>
                                        <option value="no_later">No Later Than</option>
                                        <option value="no_earlier">No Earlier Than</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Insurance Policy</label>
                                    <select class="form-control select2" id="ic-insurance-policy"></select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Driver</label>
                                    <select class="form-control select2" id="ic-driver"></select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Special Instructions</label>
                                    <textarea class="form-control" id="ic-special-instructions" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Internal Note</label>
                                    <textarea class="form-control" id="ic-internal-note" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="save-interested-carrier-btn">Save</button>
                </div>
            </div>
        </div>
    </div>
    <!-- ./ INTERESTED CARRIERS MODAL -->
    <!-- Origin Modal -->
    <div class="modal fade" id="origin-modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Origin Details</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="origin-form">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Contact Name</label>
                                    <input type="text" class="form-control" id="origin-contact-name-input">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Contact Phone</label>
                                    <input type="text" class="form-control" id="origin-contact-phone-input">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Contact Email</label>
                                    <input type="email" class="form-control" id="origin-contact-email-input">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Address</label>
                                    <input type="text" class="form-control" id="origin-address-input">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>City</label>
                                    <input type="text" class="form-control" id="origin-city-input">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>State</label>
                                    <input type="text" class="form-control" id="origin-state-input">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Country</label>
                                    <input type="text" class="form-control" id="origin-country-input">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Postal Code</label>
                                    <input type="text" class="form-control" id="origin-postal-code-input">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="save-origin-btn">Save Changes</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /. Origin Modal -->
    <!-- Destination Modal -->
    <div class="modal fade" id="destination-modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Destination Details</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="destination-form">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Contact Name</label>
                                    <input type="text" class="form-control" id="destination-contact-name-input">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Contact Phone</label>
                                    <input type="text" class="form-control" id="destination-contact-phone-input">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Contact Email</label>
                                    <input type="email" class="form-control" id="destination-contact-email-input">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Address</label>
                                    <input type="text" class="form-control" id="destination-address-input">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>City</label>
                                    <input type="text" class="form-control" id="destination-city-input">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>State</label>
                                    <input type="text" class="form-control" id="destination-state-input">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Country</label>
                                    <input type="text" class="form-control" id="destination-country-input">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Postal Code</label>
                                    <input type="text" class="form-control" id="destination-postal-code-input">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="save-destination-btn">Save Changes</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /. Destination Modal -->
  </div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
    <strong>Copyright &copy; 2024-2025 <a href="https://www.advanced-transports.com/">Advanced Transports</a>.</strong>
    All rights reserved.
    <div class="float-right d-none d-sm-inline-block">
      <b>Version</b> 1.0
    </div>
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="../plugins/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  $.widget.bridge('uibutton', $.ui.button)
</script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- DataTables  & Plugins -->
<script src="../plugins/datatables/jquery.dataTables.min.js"></script>
<script src="../plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="../plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="../plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="../plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="../plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="../plugins/jszip/jszip.min.js"></script>
<script src="../plugins/pdfmake/pdfmake.min.js"></script>
<script src="../plugins/pdfmake/vfs_fonts.js"></script>
<script src="../plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="../plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="../plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
<!-- Select2 -->
<script src="../plugins/select2/js/select2.full.min.js"></script>
<!-- daterangepicker -->
<script src="../plugins/moment/moment.min.js"></script>
<script src="../plugins/daterangepicker/daterangepicker.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="../plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- overlayScrollbars -->
<script src="../plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.js"></script>
<!-- Advanced Transports --> 
<script src="../dist/js/core.js"></script>

<script type="text/javascript">
  $(function(){
    //Initialize Select2 Elements
    $('.select2').select2()

    //Date picker
    
    $('#first_available_pickup_date').datetimepicker({
        format: 'L'
    });

     // Payment date picker initialization
    $('#payment-date').datetimepicker({
        format: 'YYYY-MM-DD'
    });

    // Format amount input
    $('#payment-amount').on('blur', function() {
        const value = $(this).val().replace(/[^\d.-]/g, '');
        if (value) {
            $(this).val('$' + parseFloat(value).toFixed(2));
        }
    });

    $('#order-payments-table').DataTable({
        "responsive": true,
        "lengthChange": false,
        "autoWidth": false,
        "searching": true,
        "paging": true
    });

    // New payment button handler
    $('#new-payment-btn').on('click', function() {
        $('#payment-modal').modal('show');
    });

    // Save payment button handler
    $('#save-payment-btn').on('click', function() {
        const orderId = $('#order_view_idOrder').text();
        const paymentData = {
            order_id: orderId,
            payment_date: $('#payment-date-input').val(),
            payment_type: $('#payment-type').val(),
            payment_direction: $('#payment-direction').val(),
            payment_amount: $('#payment-amount').val().replace('$', '').trim(),
            identification: $('#payment-identification').val(),
            note: $('#payment-note').val()
        };

        savePaymentFromOrder(paymentData);
    });

    // Load payments when tab is clicked
    $('#tab_payment_history').on('click', function() {
        const orderId = $('#order_view_idOrder').text();
        //alert('id: '+orderId);
        loadPaymentsByOrder(orderId);
    });


     // Initialize datepickers
    $('#ic-pickup-date, #ic-delivery-date').datetimepicker({
        format: 'YYYY-MM-DD'
    });

    // Format input after date selection
    $("#ic-pickup-date, #ic-delivery-date").on("change.datetimepicker", function(e) {
        $(this).find('input').val(e.date.format('YYYY-MM-DD'));
    });

    // Initialize select2
    $('#ic-carrier-select, #ic-insurance-policy, #ic-driver').select2({
        dropdownParent: $('#interested-carrier-modal')
    });

    // Load data when tab is clicked
    $('#tab_interested_carriers').on('click', function() {
        const orderId = $('#order_view_idOrder').text();
        loadOrderInterestedCarriers(orderId);
    });

    // New button click handler
    $('#new-interested-carrier-btn').on('click', function() {
        load_carriers_select();
        load_insurance_policies_select();
        load_drivers_select();
        $('#interested-carrier-modal').modal('show');
    });

    // Save button click handler
    $('#save-interested-carrier-btn').on('click', function() {
        const orderId = $('#order_view_idOrder').text();
        saveOrderInterestedCarrier(orderId);
    });

    $('#ic-carrier-select').on('change', function() {
        get_carrier_details($(this).val());
    });

    

    
  })
</script>
<script type="text/javascript">
  setTimeout(
  function() 
  {
    $('.nav-link').removeClass('active');
    $('.nav-link').find('i.fa-search').parent().addClass( "active" );
  }, 1200);

  load_order_view();
  loadOrderVehicles();

</script>
</body>
</html>
